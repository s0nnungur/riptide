<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Question 5 - Content Not Being Cached on Cloudflare</title>
    <link rel="stylesheet" href="styles/globals.css" />
  </head>
  <body>
    <main style="max-width: 700px; margin: auto;">
      <h1 style="color: #404041; margin-bottom: 1rem;">
        5. Content Not Being Cached on Cloudflare
      </h1>

      <h2 style="color: #404041;">Response</h2>
      <div class="response-block">
        Hi! José Miguel from Cloudflare Support here.

        When Cloudflare doesn't cache your content, it's usually because your origin server is sending response headers telling Cloudflare not to cache (like
        <code>Cache-Control: no-store, no-cache</code>). These headers instruct both browsers and Cloudflare to avoid caching the content.
        We can adjust these headers to allow caching or use Cloudflare's Cache Rules to override them and enable caching at the edge.
        If you want Cloudflare to cache content regardless of the origin's headers, we can set up Cache Rules or use the
        <code>Cloudflare-CDN-Cache-Control</code> header on your server.
      </div>

      <h2 style="color: #404041;">Thought Process</h2>
      <p>
        The issue is the presence of restrictive caching headers (<code>no-store, no-cache</code>) on the origin response. This can be overridden through:
      </p>
      <ul>
        <li>
          <code>Cloudflare-CDN-Cache-Control</code> header, which allows CDN-specific cache directives
        </li>
        <li>Dashboard Cache Rules, where we can force caching even if the origin headers say otherwise</li>
      </ul>
      <p>
        Diagnosing involves inspecting response headers using tools like <code>curl -I</code> or browser devtools network panel.<br /><br />
        From there, applying cache rules or adjusting origin headers helps solve caching problems.
      </p>

      <h2 style="color: #404041;">Tools I Would Use</h2>
      <ul>
        <li>
          <strong>curl -I</strong> — To inspect HTTP response headers directly from the origin and Cloudflare edge
        </li>
        <li>
          <strong>Browser Developer Tools</strong> — To view network requests and response headers
        </li>
        <li>
          <strong>Cloudflare Dashboard</strong> — To review cache settings and create Cache Rules
        </li>
      </ul>

      <h2 style="color: #404041;">References</h2>
      <ul>
        <li>
          <a href="https://developers.cloudflare.com/cache/concepts/cdn-cache-control/" target="_blank" rel="noopener noreferrer" style="color: #f48120;">
            CDN-Cache-Control
          </a>
        </li>
      </ul>

      <a href="index.html">
        <button class="cta-button">← Back to Index</button>
      </a>
    </main>
  </body>
</html>
